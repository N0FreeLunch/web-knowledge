## 커넥션을 이해해야 하는 이유
- 웹 사이트의 성능에 큰 영향을 주는 요소 중 하나에 관한 이해를 할 수 있기 때문

## HTTP/1.x의 커넥션 종류
- 단기 커넥션
- 영속적인 커넥션
- HTTP 파이프라이닝

## 초기 HTTP 모델
- HTTP 프로토콜은 주로 TCP 전송프로토콜을 이용한다.
- 요청을 전송할 때 마다 TCP 커넥션을 만들어 통신을 했다.
- 응답을 보내면 TCP 커넥션이 닫히는 방식이었다.
- 1 요청에 1 커넥션이 필요했다.

### 초기 모델의 단점
- TCP 통신을 열고 닫는 것이 많은 자원을 소모함. 지연시간 발생, 서버 리소스 사용 등등
- 현대 웹 페이지는 기본적으로 여러 요청을 요구한다. HTML DOC과 그 안에 적힌 CSS, JS, IMG 등을 동일 서버에 추가적으로 요구할 때가 많아 비효율적이다.

## HTTP/1.1 에서 추가된 기능
### 영속적인 커넥션
- 하나의 커넥션 위에서 연속적인 커넥션을 처리하도록 한다. 연달은 요청을 처리하기 때문에 새 요청을 처리하기 위해 새 연결을 열 필요가 없다.

### HTTP 파이프라이닝
- 요청을 보낸 후, 응답을 기다리지 않고 새로운 요청을 연속해서 보낼 수 있다.

## 커넥션 모델 비교
- short-lived connection : 커넥션 연결 - 요청A - 응답A - 커넥션 종료 - 커넥션 연결 - 요청B - 응답B - 커넥션 종료 - 커넥션 연결 - 요청C - 응답C - 커넥션 종료
- persistent connection : 커넥션 연결 - 요청A - 응답A - 요청B - 응답B - 요청C - 응답C - 커넥션 종료
- HTTP pipeling : 커넥션 연결 - 요청A - 요청B - 요청C - 응답A - 응답B - 응답C - 커넥션 종료

## 단기 커넥션
- HTTP/1.0의 기본 커넥션은 단기 커넥션
- 하나의 HTTP 요청은 서로 독립적인 커넥션 위에서 실행 된다.
- 통신 프로토콜을 주고 받기 전에 물리적인 연결을 위한 채널이 만들어져야 하는데 이를 핸드셰이크라고 한다.
- HTTP 통신을 이루기 전에 TCP의 헨드세이크 과정이 일어나야 한다.
- TCP 헨드세이크는 직렬화 되므로 하나의 TCP 연결이 끝난 후에 다음 TCP 요청이 이뤄질 수 있다.


## Reference
- https://developer.mozilla.org/ko/docs/Web/HTTP/Connection_management_in_HTTP_1.x




